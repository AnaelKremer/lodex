[use]
plugin = basics
plugin = analytics

# We sometime have a stringified value (like "{id:1, name: 'Bob'}"), and we want to parse it, if possible
# This assign command aim is to do that, it update the [[SOURCE COLUMN]] to JSON.parse it if possible.
[assign]
path = value
value = update("value.[[SOURCE COLUMN]]", (item) => { try { return JSON.parse(item)} catch {return item } }).get("value.[[SOURCE COLUMN]]")

[expand]
path = value

[expand/exploding]

[expand/expand]
path = value
size = [[BATCH SIZE]]

[expand/expand/throttle]
bySecond = 2

[expand/expand/URLConnect]
url = [[WEB SERVICE URL]]
timeout = 5000
noerror = true
retries = 5

[expand/aggregate]
